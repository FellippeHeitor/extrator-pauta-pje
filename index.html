<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Processos - Pauta de Audiências PJe TJMG</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPgo8c3ZnIHdpZHRoPSI4MDBweCIgaGVpZ2h0PSI4MDBweCIgdmlld0JveD0iMCAwIDQ4IDQ4IiB2ZXJzaW9uPSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ4IDQ4Ij4KICAgIDxwb2x5Z29uIGZpbGw9IiM0M0EwNDciIHBvaW50cz0iNDAuNiwxMi4xIDE3LDM1LjcgNy40LDI2LjEgNC42LDI5IDE3LDQxLjMgNDMuNCwxNC45Ii8+Cjwvc3ZnPg==">
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <svg class="icon" viewBox="0 0 48 48" width="32" height="32">
                    <polygon fill="#43A047" points="40.6,12.1 17,35.7 7.4,26.1 4.6,29 17,41.3 43.4,14.9"/>
                </svg>
                Extrator de Processos - Pauta PJe TJMG
            </h1>
            <p>Extraia dados de processos criminais das pautas de audiências do PJe</p>
        </header>

        <main>
            <section class="file-and-digits-section">
                <div class="file-input-container">
                    <label for="file-input" class="file-label">
                        <svg class="upload-icon" viewBox="0 0 24 24" width="24" height="24">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        Selecionar arquivo PDF
                    </label>
                    <input type="file" id="file-input" accept=".pdf" />
                    <div class="file-info" id="file-info" style="display: none;">
                        <span id="file-name"></span>
                        <span id="file-size"></span>
                    </div>
                </div>

                <div class="digits-section" id="digits-section" style="display: none;">
                    <h3>Filtrar por Dígito</h3>
                    <p>Selecione os dígitos: <small style="color: #666;">(salvos automaticamente)</small></p>
                    <div class="digits-grid-compact">
                        <button type="button" class="digit-btn" data-digit="0">0</button>
                        <button type="button" class="digit-btn" data-digit="1">1</button>
                        <button type="button" class="digit-btn selected" data-digit="2">2</button>
                        <button type="button" class="digit-btn selected" data-digit="3">3</button>
                        <button type="button" class="digit-btn" data-digit="4">4</button>
                        <button type="button" class="digit-btn" data-digit="5">5</button>
                        <button type="button" class="digit-btn" data-digit="6">6</button>
                        <button type="button" class="digit-btn" data-digit="7">7</button>
                        <button type="button" class="digit-btn" data-digit="8">8</button>
                        <button type="button" class="digit-btn" data-digit="9">9</button>
                    </div>
                    <div class="digits-controls-compact">
                        <button type="button" id="select-all-digits">Todos</button>
                        <button type="button" id="select-none-digits">Limpar</button>
                    </div>
                    <button type="button" id="process-btn" class="primary-btn">Processar Arquivo</button>
                </div>
            </section>

            <section class="progress-section" id="progress-section" style="display: none;">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Processando PDF...</div>
                </div>
            </section>

            <section class="results-section" id="results-section" style="display: none;">
                <h2>Resultados da Extração</h2>
                <div class="results-summary">
                    <div class="summary-item">
                        <span class="summary-label">Período:</span>
                        <span id="periodo-found">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Processos encontrados:</span>
                        <span id="total-found">0</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Dígitos selecionados:</span>
                        <span id="digits-selected">-</span>
                    </div>
                </div>

                <div class="results-preview" id="results-preview">
                    <h3>Dados extraídos:</h3>
                    <div class="preview-table-container">
                        <table id="preview-table">
                            <thead>
                                <tr>
                                    <th>Processo</th>
                                    <th>Data</th>
                                    <th>Hora</th>
                                </tr>
                            </thead>
                            <tbody id="preview-tbody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="results-actions">
                    <button type="button" id="copy-clipboard-btn" class="action-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                        </svg>
                        Copiar para Área de Transferência
                    </button>
                    <button type="button" id="download-csv-btn" class="action-btn primary">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        Baixar CSV
                    </button>
                </div>
            </section>

            <section class="error-section" id="error-section" style="display: none;">
                <div class="error-message">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                    </svg>
                    <span id="error-text">Erro ao processar arquivo</span>
                </div>
            </section>
        </main>

        <footer>
            <p>Versão Web - Extrator de Processos PJe TJMG</p>
        </footer>
    </div>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Configurar PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    
    <!-- Scripts da aplicação -->
    <script src="js/pdf-extractor.js"></script>
    <script src="js/csv-exporter.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
